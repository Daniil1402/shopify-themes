$(function() {
    // header size
    $(document).scroll(function() {
        if ($(window).width() > 639) {
            if ($(document).scrollTop() == 0) {
                $(".header").removeClass("header-padding")
            } else if ($(document).scrollTop() > 24) {
                $(".header").addClass("header-padding")
            }
        }
    });

    // product-item
    $("[data-product-item]").click(function() {
        const $currentProduct = $($(this).parent(".button-group").siblings("a").find(".bottom"));
        let isOpen = $currentProduct.hasClass("active-hover")
        if(isOpen) {
            $currentProduct.fadeOut(function() {
                $currentProduct.removeClass("active-hover")
            })
        }
        else {
            $currentProduct.fadeIn(function() {
                $currentProduct.addClass("active-hover")
            })
        }
    })

    // owl.carousel sliders

    //-- index-template
    const $indexTemplateSlider = $('#index-template-slider').owlCarousel({
        nav: false,
        dots: false,
        loop: true,
        items: 1
    });

    //-- product-template
    $('#product-template-slider').owlCarousel({
        nav: false,
        dots: true,
        loop: true,
        items: 1
    });

    //-- Events of sections
    // $(document).on("shopify:section:load", function(event) {
    //     console.log("shopify:section:load triggered.")
    //     shopifySectionLoad($(this), event)
    // })

    // function shopifySectionLoad($this, event) {
    //     // console.log($this, event)
    //     // console.log("Target", event.target)
    //     // const $sectionID = $("#" + event.target.id)
    //     // console.log($sectionID)
    //     // const blockForReload = $sectionID.find(".index-slider.owl-carousel")
    //     // console.log(blockForReload)
    //     $indexTemplateSlider.trigger('refresh.owl.carousel');
    // }
    //-- Events of blocks
    $(document).on("shopify:block:select", function(event) {
        console.log("shopify:block:select triggered.")
        shopifyBlockSelect($(this), event)
    })

    function shopifyBlockSelect($this, event) {
        console.log($this, event)
        console.log("Target", event.target)
        console.log("Target parent", $(event.target).parent()[0].id)
        // const $sectionID = $("#" + event.target.id)
        // console.log($sectionID)
        // const blockForReload = $sectionID.find(".index-slider.owl-carousel")
        // console.log(blockForReload)
        $indexTemplateSlider.trigger('refresh.owl.carousel');
    }
})